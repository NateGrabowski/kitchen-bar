<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kitchen Bar - Hybrid Options</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>body { margin: 0; }</style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useId } = React;

    function HybridBarOptions() {
      const [activeOption, setActiveOption] = useState('flush');
      const [config, setConfig] = useState({
        stepHeight: 23.5,
        cabinetHeight: 34.5,
        cabinetDepth: 24,
        barTopThickness: 1.5,
        barLength: 84,
        kitchenOverhang: 12,
        cabinetSetback: 0,
        raisedBarHeight: 6,
        lrShelfHeight: 42,
        lrShelfDepth: 10,
      });

      const uniqueId = useId();
      const update = (key, value) => setConfig(prev => ({ ...prev, [key]: value }));
      const barTopFromKitchen = config.cabinetHeight + config.barTopThickness;

      const options = [
        { id: 'flush', name: 'Flush Peninsula', desc: 'Cabinets align with step edge' },
        { id: 'setback', name: 'Setback Peninsula', desc: 'Cabinets pulled back, step visible' },
        { id: 'tiered', name: 'Tiered Top', desc: 'Two-level: counter + raised bar' },
        { id: 'ledge', name: 'Ledge + Cabinets', desc: 'Add LR-side shelf for drinks' },
        { id: 'floating', name: 'Upper + Lower', desc: 'Base cabs + floating LR shelves' },
      ];

      return (
        <div style={{ minHeight: '100vh', background: '#0a1628', color: '#e2e8f0', fontFamily: 'system-ui, sans-serif', padding: 16 }}>
          <style>{`
            .panel { background: #111d2e; border: 1px solid #243447; border-radius: 8px; padding: 16px; margin-bottom: 12px; }
            .panel-title { font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 1.5px; color: #60a5fa; margin-bottom: 14px; padding-bottom: 8px; border-bottom: 1px solid #243447; }
            .option-btn { display: block; width: 100%; text-align: left; padding: 10px 12px; margin-bottom: 8px; background: #0d1520; border: 2px solid #243447; border-radius: 6px; cursor: pointer; }
            .option-btn.active { border-color: #3b82f6; background: #1a2d44; }
            .option-btn:hover:not(.active) { border-color: #3b5a7a; }
            .option-btn .name { font-size: 13px; font-weight: 600; color: #e2e8f0; }
            .option-btn .desc { font-size: 10px; color: #64748b; margin-top: 2px; }
            .slider-group { margin-bottom: 12px; }
            .slider-label { display: flex; justify-content: space-between; font-size: 12px; color: #94a3b8; margin-bottom: 4px; }
            .slider-value { font-family: monospace; color: #60a5fa; }
            input[type="range"] { width: 100%; height: 6px; background: #1e3a5f; border-radius: 3px; -webkit-appearance: none; }
            input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 18px; height: 18px; background: #3b82f6; border-radius: 50%; cursor: pointer; }
            .calc-row { display: flex; justify-content: space-between; padding: 5px 0; font-size: 12px; border-bottom: 1px solid #1e293b; }
            .calc-row span:first-child { color: #94a3b8; }
            .calc-row span:last-child { font-family: monospace; color: #60a5fa; }
            @media (max-width: 900px) { .main-grid { grid-template-columns: 1fr !important; } }
          `}</style>

          <div style={{ maxWidth: 1200, margin: '0 auto' }}>
            <h1 style={{ fontSize: 22, fontWeight: 500, margin: 0, color: '#f1f5f9' }}>Kitchen Bar — Hybrid Options</h1>
            <p style={{ color: '#64748b', marginTop: 4, marginBottom: 16, fontSize: 13 }}>Comparing cabinet configurations on kitchen floor</p>

            <div className="main-grid" style={{ display: 'grid', gridTemplateColumns: '280px 1fr', gap: 16 }}>
              <div>
                <div className="panel">
                  <div className="panel-title">Options</div>
                  {options.map(opt => (
                    <button key={opt.id} className={`option-btn ${activeOption === opt.id ? 'active' : ''}`} onClick={() => setActiveOption(opt.id)}>
                      <div className="name">{opt.name}</div>
                      <div className="desc">{opt.desc}</div>
                    </button>
                  ))}
                </div>

                <div className="panel">
                  <div className="panel-title">Dimensions</div>
                  {[
                    ['stepHeight', 'Step Height', 18, 30, 0.5],
                    ['cabinetHeight', 'Cabinet Height', 30, 42, 0.5],
                    ['cabinetDepth', 'Cabinet Depth', 12, 30, 1],
                    ['kitchenOverhang', 'Kitchen Overhang', 8, 18, 1],
                    ['barLength', 'Bar Length', 60, 120, 6],
                  ].map(([key, label, min, max, step]) => (
                    <div className="slider-group" key={key}>
                      <div className="slider-label"><span>{label}</span><span className="slider-value">{config[key]}"</span></div>
                      <input type="range" min={min} max={max} step={step} value={config[key]} onChange={e => update(key, parseFloat(e.target.value))} />
                    </div>
                  ))}
                  {activeOption === 'tiered' && (
                    <div className="slider-group">
                      <div className="slider-label"><span>Raised Bar Height</span><span className="slider-value">{config.raisedBarHeight}"</span></div>
                      <input type="range" min="4" max="10" step="0.5" value={config.raisedBarHeight} onChange={e => update('raisedBarHeight', parseFloat(e.target.value))} />
                    </div>
                  )}
                  {(activeOption === 'ledge' || activeOption === 'floating') && (
                    <>
                      <div className="slider-group">
                        <div className="slider-label"><span>LR Shelf Height</span><span className="slider-value">{config.lrShelfHeight}"</span></div>
                        <input type="range" min="36" max="48" step="1" value={config.lrShelfHeight} onChange={e => update('lrShelfHeight', parseFloat(e.target.value))} />
                      </div>
                      <div className="slider-group">
                        <div className="slider-label"><span>LR Shelf Depth</span><span className="slider-value">{config.lrShelfDepth}"</span></div>
                        <input type="range" min="6" max="16" step="1" value={config.lrShelfDepth} onChange={e => update('lrShelfDepth', parseFloat(e.target.value))} />
                      </div>
                    </>
                  )}
                </div>

                <div className="panel">
                  <div className="panel-title">Measurements</div>
                  <div className="calc-row"><span>Bar from kitchen</span><span>{barTopFromKitchen}"</span></div>
                  <div className="calc-row"><span>Bar from living room</span><span>{(config.stepHeight + barTopFromKitchen).toFixed(1)}"</span></div>
                  {activeOption === 'tiered' && <div className="calc-row"><span>Raised bar height</span><span>{(barTopFromKitchen + config.raisedBarHeight).toFixed(1)}"</span></div>}
                  <div className="calc-row"><span>Seating capacity</span><span>~{Math.floor(config.barLength / 24)}</span></div>
                </div>
              </div>

              <div className="panel">
                <div className="panel-title">{options.find(o => o.id === activeOption)?.name} — Side Section</div>
                <svg viewBox="0 0 540 360" style={{ width: '100%', background: '#0d1520', borderRadius: 4 }}>
                  <defs><pattern id={`${uniqueId}-grid`} width="20" height="20" patternUnits="userSpaceOnUse"><path d="M 20 0 L 0 0 0 20" fill="none" stroke="#1a2a3a" strokeWidth="0.5"/></pattern></defs>
                  <rect width="540" height="360" fill={`url(#${uniqueId}-grid)`}/>
                  {(() => {
                    const scale = 1.8, groundY = 300, stepX = 220;
                    const kitchenFloorY = groundY - config.stepHeight * scale;
                    const cabinetHeightPx = config.cabinetHeight * scale;
                    const cabinetDepthPx = config.cabinetDepth * scale;
                    const barThickPx = Math.max(config.barTopThickness * scale * 2, 6);
                    const kitchenOverhangPx = config.kitchenOverhang * scale;
                    const setbackPx = (activeOption === 'setback' ? config.cabinetSetback : 0) * scale;
                    const cabinetTopY = kitchenFloorY - cabinetHeightPx;
                    const barTopY = cabinetTopY - barThickPx;
                    const cabinetFront = stepX - setbackPx;
                    const cabinetBack = cabinetFront + cabinetDepthPx;
                    const barBack = cabinetBack + kitchenOverhangPx;

                    return (
                      <g>
                        <rect x="20" y={groundY} width={stepX - 20} height="50" fill="#1e3a5f"/>
                        <text x="110" y={groundY + 25} textAnchor="middle" fill="#3b5a7a" fontSize="10">LIVING ROOM</text>
                        <rect x={stepX} y={kitchenFloorY} width="300" height={groundY - kitchenFloorY + 50} fill="#234060"/>
                        <text x="400" y={kitchenFloorY + 20} textAnchor="middle" fill="#3b5a7a" fontSize="10">KITCHEN</text>
                        <line x1={stepX} y1={groundY} x2={stepX} y2={kitchenFloorY} stroke="#60a5fa" strokeWidth="2"/>

                        {/* Cabinet */}
                        <rect x={cabinetFront} y={cabinetTopY} width={cabinetDepthPx} height={cabinetHeightPx - 4} fill="#2d4a6a" stroke="#60a5fa" strokeWidth="1.5"/>
                        <rect x={cabinetFront} y={kitchenFloorY - 4} width={cabinetDepthPx} height="4" fill="#0d1520"/>

                        {/* Bar top variations */}
                        {(activeOption === 'flush' || activeOption === 'setback') && (
                          <rect x={cabinetFront - 2} y={barTopY} width={barBack - cabinetFront + 4} height={barThickPx} fill="#92400e" stroke="#b45309" strokeWidth="1.5"/>
                        )}

                        {activeOption === 'tiered' && (() => {
                          const raisedPx = config.raisedBarHeight * scale;
                          const raisedWidth = cabinetDepthPx * 0.4;
                          return (<>
                            <rect x={cabinetFront + raisedWidth} y={barTopY} width={barBack - cabinetFront - raisedWidth + 4} height={barThickPx} fill="#92400e" stroke="#b45309" strokeWidth="1.5"/>
                            <rect x={cabinetFront - 2} y={barTopY - raisedPx} width={raisedWidth + 4} height={barThickPx} fill="#92400e" stroke="#b45309" strokeWidth="1.5"/>
                            <rect x={cabinetFront + raisedWidth - 4} y={barTopY - raisedPx + barThickPx} width="4" height={raisedPx - 2} fill="#78350f"/>
                            <text x={cabinetFront + raisedWidth / 2} y={barTopY - raisedPx - 8} textAnchor="middle" fill="#fb923c" fontSize="9">BAR</text>
                            <text x={cabinetFront + raisedWidth + 40} y={barTopY - 8} textAnchor="middle" fill="#4ade80" fontSize="9">COUNTER</text>
                          </>);
                        })()}

                        {activeOption === 'ledge' && (() => {
                          const shelfY = groundY - config.lrShelfHeight * scale;
                          const shelfDepthPx = config.lrShelfDepth * scale;
                          return (<>
                            <rect x={cabinetFront - 2} y={barTopY} width={barBack - cabinetFront + 4} height={barThickPx} fill="#92400e" stroke="#b45309" strokeWidth="1.5"/>
                            <rect x={stepX - shelfDepthPx - 5} y={shelfY} width={shelfDepthPx} height={barThickPx * 0.7} fill="#78350f" stroke="#92400e" strokeWidth="1"/>
                            <path d={`M ${stepX - 3} ${shelfY + barThickPx * 0.7} L ${stepX - 3} ${shelfY + 25} L ${stepX - shelfDepthPx} ${shelfY + 25}`} fill="none" stroke="#4a6a8a" strokeWidth="2"/>
                            <text x={stepX - shelfDepthPx / 2 - 5} y={shelfY - 8} textAnchor="middle" fill="#f472b6" fontSize="9">LEDGE</text>
                          </>);
                        })()}

                        {activeOption === 'floating' && (() => {
                          const shelfY = groundY - config.lrShelfHeight * scale;
                          const shelfDepthPx = config.lrShelfDepth * scale;
                          return (<>
                            <rect x={cabinetFront - 2} y={barTopY} width={barBack - cabinetFront + 4} height={barThickPx} fill="#92400e" stroke="#b45309" strokeWidth="1.5"/>
                            <rect x={stepX - shelfDepthPx - 5} y={shelfY} width={shelfDepthPx} height={barThickPx * 0.6} fill="#2d4a6a" stroke="#60a5fa" strokeWidth="1"/>
                            <rect x={stepX - shelfDepthPx - 5} y={shelfY - 35} width={shelfDepthPx} height={barThickPx * 0.6} fill="#2d4a6a" stroke="#60a5fa" strokeWidth="1"/>
                            <text x={stepX - shelfDepthPx / 2 - 5} y={shelfY - 47} textAnchor="middle" fill="#a78bfa" fontSize="9">DISPLAY</text>
                          </>);
                        })()}

                        {/* Person */}
                        {(() => {
                          const stoolY = kitchenFloorY - 30 * scale;
                          const px = cabinetBack + kitchenOverhangPx / 2 + 20;
                          return (<g opacity="0.6">
                            <rect x={px - 10} y={stoolY} width="20" height="4" fill="#4a6a8a" rx="2"/>
                            <rect x={px - 2} y={stoolY + 4} width="4" height={kitchenFloorY - stoolY - 4} fill="#4a6a8a"/>
                            <ellipse cx={px} cy={stoolY - 40} rx="10" ry="12" fill="#5a7a9a"/>
                            <rect x={px - 10} y={stoolY - 28} width="20" height="30" fill="#5a7a9a" rx="3"/>
                          </g>);
                        })()}

                        {/* Dimensions */}
                        <line x1="180" y1={groundY} x2="180" y2={kitchenFloorY} stroke="#fb923c" strokeWidth="1"/>
                        <text x="170" y={(groundY + kitchenFloorY) / 2 + 4} textAnchor="end" fill="#fb923c" fontSize="10">{config.stepHeight}"</text>

                        <line x1={cabinetBack + kitchenOverhangPx + 30} y1={kitchenFloorY} x2={cabinetBack + kitchenOverhangPx + 30} y2={barTopY + 3} stroke="#4ade80" strokeWidth="1"/>
                        <text x={cabinetBack + kitchenOverhangPx + 40} y={(kitchenFloorY + barTopY) / 2} fill="#4ade80" fontSize="10">{barTopFromKitchen}"</text>

                        <text x="25" y="22" fill="#60a5fa" fontSize="12" fontWeight="600">{options.find(o => o.id === activeOption)?.name.toUpperCase()}</text>
                      </g>
                    );
                  })()}
                </svg>
              </div>
            </div>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<HybridBarOptions />);
  </script>
</body>
</html>
